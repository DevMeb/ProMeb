import{s as C,i as O,a,o as n,f as E,u as s,b as t,t as m,F as B,r as q,g as j,h as M,A as I,l as P,e as p,w as _,d as v,v as h,n as k,B as R}from"./app-CzuueUTO.js";import{u as w,d as z,f as G}from"./prestations-AgWsYLdo.js";/* empty css            */const J={class:"mt-6"},K={key:0,class:"flex justify-center my-6"},Q={key:1,class:"flex justify-center my-6 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg"},W={class:"text-lg font-medium ml-2"},X={key:2,class:"flex justify-center my-6 bg-gray-800 px-6 py-4 rounded-lg shadow-lg"},Z={key:3,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-8"},tt={__name:"PrestationList",setup(l){const c=w(),{fetchPrestations:d,clearErrors:i}=c,{filteredPrestations:f,errors:u,loading:b}=C(c);return O(()=>{d(),i("fetch")}),(g,r)=>(n(),a("div",J,[E(s(St)),E(s(Ot)),s(b).fetch?(n(),a("div",K,r[0]||(r[0]=[t("div",{class:"animate-spin inline-block w-6 h-6 border-4 border-white border-t-transparent rounded-full"},null,-1),t("p",{class:"text-white text-lg font-medium ml-2"},"Chargement des prestations...",-1)]))):s(u).fetch?(n(),a("div",Q,[r[1]||(r[1]=t("span",{class:"text-xl"},"âŒ",-1)),t("p",W,m(s(u).fetch),1)])):s(f).length===0?(n(),a("div",X,r[2]||(r[2]=[t("p",{class:"text-gray-300 text-lg"},"ðŸ“­ Aucune prestation trouvÃ©e.",-1)]))):(n(),a("div",Z,[(n(!0),a(B,null,q(s(f),e=>(n(),j(s(Ft),{prestation:e,key:e.id},null,8,["prestation"]))),128))]))]))}},et={class:"fixed inset-0 flex items-center justify-center bg-black/50 backdrop-blur-md z-50"},st={class:"bg-white p-6 rounded-xl shadow-xl w-[90%] sm:w-96 transform transition-all animate-fade-in"},ot={class:"flex items-center justify-between border-b pb-2"},rt={class:"text-xl font-semibold text-gray-800 flex items-center"},nt={key:0,class:"mr-2"},it={key:1,class:"mr-2"},at={key:0,class:"text-red-500 text-xs mt-1"},lt={key:0,class:"text-red-500 text-xs mt-1"},dt={key:0,class:"text-red-500 text-xs mt-1"},ut={key:0,class:"text-red-500 text-xs mt-1"},mt={class:"flex justify-end space-x-3 mt-4"},pt=["disabled"],ct={key:0,class:"animate-spin mr-2"},H={__name:"PrestationFormModal",props:{prestation:Object},emits:["close"],setup(l,{emit:c}){const d=l,i=c,f=w(),{addPrestation:u,updatePrestation:b,clearErrors:g}=f,{errors:r,loading:e}=C(f),o=M({id:null,date:"",heures:"",adresse:"",horaires:""});I(()=>{o.value=d.prestation?{...d.prestation,date_prestation:z(d.prestation.date_prestation).format("YYYY-MM-DD")}:{id:null,date_prestation:"",nombre_heures:"",adresse:""}});const T=async()=>{(o.value.id?await b(o.value):await u(o.value))&&$()},$=()=>{g("validationErrors"),i("close")};return(L,x)=>{var D,F,A,S,V,Y,N,U;return n(),a("div",et,[t("div",{onClick:P($,["self"]),class:"fixed inset-0"}),t("div",st,[t("div",ot,[t("h2",rt,[o.value.id?(n(),a("span",nt,"âœï¸")):(n(),a("span",it,"âž•")),p(" "+m(o.value.id?"Ã‰diter la prestation":"Ajouter une prestation"),1)]),t("button",{onClick:$,class:"text-gray-500 hover:text-gray-700 transition"},"âœ–ï¸")]),t("form",{onSubmit:P(T,["prevent"]),class:"mt-4 space-y-4"},[t("div",null,[x[4]||(x[4]=t("label",{for:"date",class:"block text-sm font-medium text-gray-700"},"Date de prestation",-1)),_(t("input",{ref:"firstInput",type:"date",id:"date","onUpdate:modelValue":x[0]||(x[0]=y=>o.value.date=y),class:k(["w-full border p-2 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500",{"border-red-500":(D=s(r).validationErrors)==null?void 0:D.date}])},null,2),[[h,o.value.date]]),(F=s(r).validationErrors)!=null&&F.date?(n(),a("p",at,m(s(r).validationErrors.date.join(", ")),1)):v("",!0)]),t("div",null,[x[5]||(x[5]=t("label",{for:"heures",class:"block text-sm font-medium text-gray-700"},"Nombre d'heures",-1)),_(t("input",{type:"number",id:"heures","onUpdate:modelValue":x[1]||(x[1]=y=>o.value.heures=y),class:k(["w-full border p-2 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500",{"border-red-500":(A=s(r).validationErrors)==null?void 0:A.heures}])},null,2),[[h,o.value.heures]]),(S=s(r).validationErrors)!=null&&S.heures?(n(),a("p",lt,m(s(r).validationErrors.heures.join(", ")),1)):v("",!0)]),t("div",null,[x[6]||(x[6]=t("label",{for:"adresse",class:"block text-sm font-medium text-gray-700"},"Adresse",-1)),_(t("input",{type:"text",id:"adresse","onUpdate:modelValue":x[2]||(x[2]=y=>o.value.adresse=y),class:k(["w-full border p-2 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500",{"border-red-500":(V=s(r).validationErrors)==null?void 0:V.adresse}])},null,2),[[h,o.value.adresse]]),(Y=s(r).validationErrors)!=null&&Y.adresse?(n(),a("p",dt,m(s(r).validationErrors.adresse.join(", ")),1)):v("",!0)]),t("div",null,[x[7]||(x[7]=t("label",{for:"horaires",class:"block text-sm font-medium text-gray-700"},"Horaires",-1)),_(t("input",{type:"text",id:"horaires","onUpdate:modelValue":x[3]||(x[3]=y=>o.value.horaires=y),class:k(["w-full border p-2 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500",{"border-red-500":(N=s(r).validationErrors)==null?void 0:N.horaires}])},null,2),[[h,o.value.horaires]]),(U=s(r).validationErrors)!=null&&U.horaires?(n(),a("p",ut,m(s(r).validationErrors.horaires.join(", ")),1)):v("",!0)]),t("div",mt,[t("button",{type:"button",onClick:$,class:"px-4 py-2 border border-gray-300 rounded hover:bg-gray-100 transition"}," Annuler "),t("button",{type:"submit",class:"px-4 py-2 bg-indigo-600 text-white rounded flex items-center hover:bg-indigo-700 transition",disabled:o.value.id?s(e).update:s(e).add},[(o.value.id?s(e).update:s(e).add)?(n(),a("span",ct,"â³")):v("",!0),p(" "+m(o.value.id?"Mettre Ã  jour":"Ajouter"),1)],8,pt)])],32)])])}}},xt={class:"bg-gray-800 p-6 rounded-lg shadow-lg flex flex-col space-y-4 hover:shadow-xl transition-all transform hover:scale-[1.02] border border-gray-700"},ft={class:"flex justify-between items-center border-b pb-3"},gt={class:"text-xl font-semibold text-white flex items-center gap-2"},bt={class:"bg-gray-900 p-4 rounded-md space-y-3"},vt={class:"text-gray-300 text-sm flex items-center"},yt={class:"text-indigo-400 ml-1"},_t={class:"text-gray-300 text-sm flex items-center"},ht={class:"text-indigo-400 ml-1"},wt={class:"text-gray-300 text-sm flex items-center"},$t={class:"text-indigo-400 ml-1"},kt={class:"text-gray-300 text-sm flex items-center"},jt={class:"text-indigo-400 ml-1"},Mt={class:"bg-gray-900 p-4 rounded-lg flex flex-col space-y-2"},Ct={class:"text-gray-300 text-sm flex items-center"},Et={class:"ml-1 text-indigo-300"},Pt={class:"text-gray-300 text-sm flex items-center"},Dt={class:"ml-1 text-indigo-300"},Ft={__name:"PrestationListItem",props:{prestation:{type:Object,required:!0}},emits:["close"],setup(l,{emit:c}){const d=M(!1),i=M(!1);function f(){d.value=!0}function u(){d.value=!1}function b(){i.value=!0}function g(){i.value=!1}return(r,e)=>(n(),a(B,null,[t("div",xt,[t("div",ft,[t("h2",gt,[e[0]||(e[0]=t("span",{class:"text-indigo-300 text-2xl"},"ðŸ’¼",-1)),p(" Prestation NÂ° "+m(l.prestation.id),1)])]),t("div",bt,[t("p",vt,[e[1]||(e[1]=p(" ðŸ—“ ")),e[2]||(e[2]=t("span",{class:"ml-2 font-semibold text-white"},"Date :",-1)),t("span",yt,m(s(G)(l.prestation.date)),1)]),t("p",_t,[e[3]||(e[3]=p(" â° ")),e[4]||(e[4]=t("span",{class:"ml-2 font-semibold text-white"},"Heures :",-1)),t("span",ht,m(l.prestation.heures)+" h",1)]),t("p",wt,[e[5]||(e[5]=p(" ðŸ“ ")),e[6]||(e[6]=t("span",{class:"ml-2 font-semibold text-white"},"Adresse :",-1)),t("span",$t,m(l.prestation.adresse),1)]),t("p",kt,[e[7]||(e[7]=p(" ðŸ•’ ")),e[8]||(e[8]=t("span",{class:"ml-2 font-semibold text-white"},"Horaires :",-1)),t("span",jt,m(l.prestation.horaires),1)])]),t("div",Mt,[t("p",Ct,[e[9]||(e[9]=p(" ðŸ•’ ")),e[10]||(e[10]=t("span",{class:"ml-2 font-semibold text-white"},"CrÃ©Ã© le :",-1)),t("span",Et,m(l.prestation.created_at),1)]),t("p",Pt,[e[11]||(e[11]=p(" ðŸ”„ ")),e[12]||(e[12]=t("span",{class:"ml-2 font-semibold text-white"},"Mis Ã  jour le :",-1)),t("span",Dt,m(l.prestation.updated_at),1)])]),t("div",{class:"flex justify-center gap-3 mt-4"},[t("button",{onClick:f,class:"btn-action bg-blue-500 hover:bg-blue-600 text-white py-1 px-3 rounded flex items-center"}," âœï¸ Modifier "),t("button",{onClick:b,class:"btn-action bg-red-500 hover:bg-red-600 text-white py-1 px-3 rounded flex items-center"}," ðŸ—‘ï¸ Supprimer ")])]),d.value?(n(),j(s(H),{key:0,prestation:l.prestation,onClose:u},null,8,["prestation"])):v("",!0),i.value?(n(),j(s(Bt),{key:1,prestation:l.prestation,onClose:g},null,8,["prestation"])):v("",!0)],64))}},At={class:"bg-gray-800 p-4 rounded-lg shadow-lg flex flex-col sm:flex-row gap-4"},St={__name:"PrestationsFilters",setup(l){const c=w(),{activeFilters:d,isAnyFilterActive:i}=C(c),{updateFilters:f}=c;R(d,b=>{f(b)},{deep:!0});const u=()=>{f({month_year:"",avec_facture:!1})};return(b,g)=>(n(),a("div",At,[g[2]||(g[2]=t("div",{class:"flex-1"},[t("p",{class:"text-gray-300 text-sm mb-2"}," Utilisez ce filtre pour afficher les prestations par mois et annÃ©e. ")],-1)),t("div",null,[g[1]||(g[1]=t("label",{class:"text-sm text-gray-300 font-semibold"},"Mois & AnnÃ©e :",-1)),_(t("input",{type:"month","onUpdate:modelValue":g[0]||(g[0]=r=>s(d).month_year=r),class:"filter-input"},null,512),[[h,s(d).month_year]])]),s(i)?(n(),a("button",{key:0,onClick:u,class:"btn-secondary"}," RÃ©initialiser ")):v("",!0)]))}},Vt={class:"fixed inset-0 bg-black/50 backdrop-blur-md flex items-center justify-center z-50"},Yt={class:"bg-white p-6 rounded-lg shadow-lg w-[24rem] animate-fade-in transform transition-transform scale-95"},Nt={class:"text-gray-700 mt-3"},Ut={class:"text-gray-900"},Bt={__name:"PrestationDeleteModal",props:{prestation:{type:Object,required:!0}},emits:["close"],setup(l,{emit:c}){const d=l,i=c,f=w(),{deletePrestation:u}=f;function b(){i("close")}function g(e){return z(e).format("DD/MM/YYYY")}async function r(){await u(d.prestation.id),b()}return(e,o)=>(n(),a("div",Vt,[t("div",{onClick:P(b,["self"]),class:"absolute inset-0"}),t("div",Yt,[o[3]||(o[3]=t("div",{class:"flex items-center space-x-3"},[t("span",{class:"text-red-600 text-2xl"},"âš ï¸"),t("h2",{class:"text-lg font-semibold text-red-600"},"Confirmation de suppression")],-1)),t("p",Nt,[o[0]||(o[0]=p(" ÃŠtes-vous sÃ»r de vouloir supprimer la prestation du ")),t("strong",Ut,m(g(l.prestation.date_prestation)),1),o[1]||(o[1]=p(" ? "))]),o[4]||(o[4]=t("p",{class:"text-sm text-gray-500 mt-2"},[p(" Cette action est "),t("span",{class:"font-semibold text-red-500"},"irrÃ©versible"),p(". ")],-1)),t("div",{class:"flex justify-end mt-6 space-x-3"},[t("button",{onClick:b,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-100 transition"}," Annuler "),t("button",{onClick:r,class:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition flex items-center"},o[2]||(o[2]=[t("span",{class:"mr-2"},"ðŸ—‘ï¸",-1),p(" Supprimer ")]))])])]))}},zt={class:"bg-gray-800 text-gray-300 p-4 rounded-lg shadow flex flex-col sm:flex-row justify-between items-center text-white mt-4"},Ht={class:"mb-2 sm:mb-0"},Tt={class:"font-bold text-lg"},Lt={class:"font-bold text-lg"},Ot={__name:"PrestationSummary",setup(l){const c=w(),{prestationCount:d,totalHours:i}=C(c);return(f,u)=>(n(),a("div",zt,[t("div",Ht,[u[0]||(u[0]=p(" Nombre de prestations : ")),t("span",Tt,m(s(d)),1)]),t("div",null,[u[1]||(u[1]=p(" Total d'heures : ")),t("span",Lt,m(s(i)),1),u[2]||(u[2]=p(" h "))])]))}},qt={class:"bg-gray-900"},It={class:"mx-auto max-w-7xl"},Rt={class:"bg-gray-900 py-10"},Gt={class:"px-4 sm:px-6 lg:px-8"},Jt={class:"sm:flex sm:items-center"},Kt={class:"mt-4"},Zt={__name:"Prestation",setup(l){const c=M(!1);return(d,i)=>(n(),a("div",qt,[t("div",It,[t("div",Rt,[t("div",Gt,[t("div",Jt,[i[2]||(i[2]=t("div",{class:"sm:flex-auto"},[t("h1",{class:"text-base font-semibold leading-6 text-white"},"Prestations"),t("p",{class:"mt-2 text-sm text-gray-300"}," Une liste de toutes les prestations dans votre compte. ")],-1)),t("div",Kt,[t("button",{onClick:i[0]||(i[0]=f=>c.value=!0),class:"bg-indigo-500 text-white px-4 py-2 rounded-md"},"Ajouter une prestation")])]),E(s(tt)),c.value?(n(),j(s(H),{key:0,onClose:i[1]||(i[1]=f=>c.value=!1)})):v("",!0)])])])]))}};export{Zt as default};
