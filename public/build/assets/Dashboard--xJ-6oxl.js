import{c as D,a as i,o,b as t,d as f,t as r,e as p,n as h,s as w,f as m,u as n,F as P,r as F,g as C,h as S,i as A,w as N,v as M,j as T}from"./app-CzuueUTO.js";import{u as k,a as V,_ as B,b as E,c as L}from"./FactureMailModal-6nmfXeVr.js";import{f as y}from"./prestations-AgWsYLdo.js";/* empty css            */const R={class:"flex items-center mb-4 relative z-10"},z={class:"text-4xl mr-3 drop-shadow-md"},I={class:"text-xl font-semibold text-white drop-shadow-md"},q={class:"text-sm text-white/80 relative z-10"},$={__name:"DashboardCard",props:{title:String,value:[String,Number],description:String,icon:String,gradient:String,textColor:String,badge:String,isDifference:Boolean},setup(e){const d=e,a=D(()=>d.title.includes("CA")?`${Number(d.value).toLocaleString("fr-FR")} ‚Ç¨`:d.value),c=D(()=>d.value>=0?"text-green-300":"text-red-300"),g=D(()=>d.value>=0?"‚ñµ":"‚ñø"),s=D(()=>d.badge.includes("‚úî")?"border-green-600/30 text-green-300":d.badge.includes("‚ö†")?"border-orange-500/30 text-amber-300":"border-gray-500/30");return(u,_)=>(o(),i("div",{class:h(`bg-gradient-to-tr ${e.gradient} p-6 rounded-xl shadow-xl transform transition-all hover:scale-[1.02] hover:shadow-2xl relative overflow-hidden`)},[_[0]||(_[0]=t("div",{class:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent"},null,-1)),t("div",R,[t("span",z,r(e.icon),1),t("h2",I,r(e.title),1)]),t("p",{class:h(`text-4xl font-bold ${e.textColor} mb-2 drop-shadow-md relative z-10`)},[p(r(a.value)+" ",1),e.isDifference?(o(),i("span",{key:0,class:h(`text-lg ml-2 ${c.value}`)},r(g.value),3)):f("",!0)],2),t("p",q,r(e.description),1),e.badge?(o(),i("div",{key:0,class:h(["absolute top-3 right-3 backdrop-blur-sm bg-white/10 text-white/90 text-xs font-medium px-3 py-1.5 rounded-full shadow-sm",s.value])},r(e.badge),3)):f("",!0)],2))}},O={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},G={__name:"PrestationsStatistiques",setup(e){const d=k(),{dashboardData:a}=w(d);return(c,g)=>(o(),i("div",O,[m($,{title:"Activit√© totale",value:n(a).prestationsDetails.count_prestations,description:"Total des interventions",icon:"üì¶",gradient:"from-indigo-500 to-indigo-600",textColor:"text-indigo-100"},null,8,["value"]),m($,{title:"Prestations sold√©es",value:n(a).prestationsDetails.count_prestations_factured,description:"Factures r√©gularis√©es",icon:"üìë",gradient:"from-green-500 to-green-600",textColor:"text-green-100",badge:"‚úîÔ∏è Cl√¥tur√©"},null,8,["value"]),m($,{title:"En attente",value:n(a).prestationsDetails.count_prestations_non_factured,description:"Factures √† √©tablir",icon:"‚è≥",gradient:"from-orange-400 to-orange-500",textColor:"text-orange-100",badge:"‚ö†Ô∏è En suspens"},null,8,["value"])]))}},H={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},U={__name:"CAStatistiques",setup(e){const d=k(),{dashboardData:a}=w(d);return(c,g)=>(o(),i("div",H,[m($,{title:"CA factur√©",value:n(a).caDetails.ca_facture,description:"Revenus confirm√©s",icon:"üí∂",gradient:"from-blue-600 to-blue-700",textColor:"text-blue-100"},null,8,["value"]),m($,{title:"CA attendu",value:n(a).caDetails.ca_attendu,description:"Revenus pr√©visionnels",icon:"üìà",gradient:"from-amber-500 to-amber-600",textColor:"text-amber-100"},null,8,["value"]),m($,{title:"√âcart",value:n(a).caDetails.difference,description:"Diff√©rence CA r√©el/pr√©visionnel",icon:"‚öñÔ∏è",gradient:n(a).caDetails.difference>=0?"from-green-600 to-green-700":"from-red-500 to-red-600",textColor:n(a).caDetails.difference>=0?"text-green-100":"text-red-100",isDifference:!0},null,8,["value","gradient","textColor"])]))}},J={class:"bg-gray-800 p-6 rounded-lg shadow-lg mb-8"},K={key:0,class:"text-gray-400"},Q={key:1,class:"space-y-6"},W={__name:"FacturesPrestationsList",setup(e){const d=k(),{dashboardData:a}=w(d);return(c,g)=>(o(),i("div",J,[g[0]||(g[0]=t("h2",{class:"text-2xl font-semibold text-white mb-4"},"Factures",-1)),n(a).factures.length===0?(o(),i("div",K," Aucune facture trouv√©e. ")):(o(),i("div",Q,[(o(!0),i(P,null,F(n(a).factures,s=>(o(),C(n(xt),{key:s.id,facture:s},null,8,["facture"]))),128))]))]))}},X={class:"flex justify-between items-center"},Y={class:"text-lg font-semibold text-white flex items-center gap-2"},Z={class:"flex flex-wrap gap-2"},tt=["disabled"],et={key:0,class:"animate-spin mr-2 border-4 border-white border-t-transparent rounded-full w-4 h-4"},st={class:"bg-gray-800 p-4 rounded-md space-y-2"},nt={class:"text-gray-300 text-sm flex items-center"},at={class:"text-indigo-400 ml-1"},ot={class:"text-gray-300 text-sm flex items-center"},rt={class:"text-indigo-400 ml-1"},it={class:"text-gray-300 text-sm flex items-center"},lt={class:"text-indigo-400 ml-1"},dt={class:"space-y-3"},ct={class:"text-md font-semibold text-gray-400 flex items-center gap-2"},ut={class:"text-xs bg-gray-700 text-gray-300 px-2 py-1 rounded-full"},gt={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},xt={__name:"FacturesListItem",props:{facture:Object},setup(e){const d=V(),{invoicePaid:a}=d,{loading:c}=w(d),g=S(!1),s=S(!1);async function u(x){await a(x)}function _(x){switch(x){case"en_attente_envoi":return"üü° En attente d'envoi";case"en_attente_paiement":return"üî¥ En attente de paiement";case"pay√©":return"üü¢ Pay√©";default:return x}}function j(x){switch(x){case"en_attente_envoi":return"border-yellow-500";case"en_attente_paiement":return"border-red-500";case"pay√©":return"border-green-500";default:return"border-gray-500"}}function b(x){switch(x){case"en_attente_envoi":return"bg-yellow-500 text-gray-900";case"en_attente_paiement":return"bg-red-500 text-white";case"pay√©":return"bg-green-500 text-white";default:return"bg-gray-500 text-white"}}return(x,l)=>(o(),i("div",{class:h(["bg-gray-900 p-6 rounded-md shadow-md border-l-8 flex flex-col gap-4",j(e.facture.statut)])},[t("div",X,[t("div",null,[t("h2",Y," üßæ Facture #"+r(e.facture.id),1),t("span",{class:h(["px-3 py-1 text-xs font-semibold rounded-full",b(e.facture.statut)])},r(_(e.facture.statut)),3)]),t("div",Z,[t("button",{onClick:l[0]||(l[0]=v=>g.value=!0),class:"flex items-center bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md text-sm transition shadow-md"}," üëÅÔ∏è Voir "),e.facture.statut==="en_attente_envoi"?(o(),i("button",{key:0,onClick:l[1]||(l[1]=v=>s.value=!0),class:"flex items-center bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-md text-sm transition shadow-md"}," üì© Envoyer ")):f("",!0),e.facture.statut==="en_attente_paiement"?(o(),i("button",{key:1,onClick:l[2]||(l[2]=v=>u(e.facture)),disabled:n(c).paid,class:"flex items-center bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md text-sm transition shadow-md disabled:opacity-50"},[n(c).paid?(o(),i("span",et)):f("",!0),l[5]||(l[5]=p(" ‚úÖ Pay√© "))],8,tt)):f("",!0)])]),t("div",st,[t("p",nt,[l[6]||(l[6]=p(" üìÖ ")),l[7]||(l[7]=t("span",{class:"ml-2 font-semibold text-white"},"Date :",-1)),t("span",at,r(n(y)(e.facture.created_at)),1)]),t("p",ot,[l[8]||(l[8]=p(" ‚è±Ô∏è ")),l[9]||(l[9]=t("span",{class:"ml-2 font-semibold text-white"},"Heures totales :",-1)),t("span",rt,r(e.facture.heures_total)+" h",1)]),t("p",it,[l[10]||(l[10]=p(" üí∂ ")),l[11]||(l[11]=t("span",{class:"ml-2 font-semibold text-white"},"Montant total :",-1)),t("span",lt,r(e.facture.montant_total)+" ‚Ç¨",1)])]),t("div",dt,[t("h3",ct,[l[12]||(l[12]=p(" üìã Prestations associ√©es ")),t("span",ut,r(e.facture.prestations.length)+" √©l√©ment(s) ",1)]),t("div",gt,[(o(!0),i(P,null,F(e.facture.prestations,v=>(o(),C(n(Ft),{key:v.id,prestation:v},null,8,["prestation"]))),128))])]),g.value?(o(),C(n(B),{key:0,invoice:e.facture,onClose:l[3]||(l[3]=v=>g.value=!1)},null,8,["invoice"])):f("",!0),s.value?(o(),C(n(E),{key:1,invoice:e.facture,onClose:l[4]||(l[4]=v=>s.value=!1)},null,8,["invoice"])):f("",!0)],2))}},ft={class:"group bg-gray-800 p-4 rounded-lg hover:bg-gray-750 transition-all duration-200 shadow-sm"},mt={class:"flex flex-col gap-2"},pt={class:"flex justify-between items-start"},bt={class:"text-sm font-mono text-purple-400"},vt={class:"ml-2 text-xs text-gray-400"},_t={class:"text-sm bg-gray-900 text-gray-400 px-2 py-1 rounded-full"},ht={class:"grid grid-cols-2 gap-2 text-sm"},yt={class:"flex items-center gap-2"},$t={class:"text-gray-300"},wt={class:"flex items-center gap-2"},Ct={class:"text-gray-300 truncate"},kt={class:"flex justify-between text-xs text-gray-400"},Dt={class:"flex items-center gap-1"},St={key:0},Pt={key:1},Ft={__name:"FacturePrestationsListItem",props:{prestation:Object},setup(e){return(d,a)=>(o(),i("div",ft,[t("div",mt,[t("div",pt,[t("div",null,[t("span",bt,"#"+r(e.prestation.id),1),t("span",vt,r(n(y)(e.prestation.date)),1)]),t("span",_t," ‚è±Ô∏è "+r(e.prestation.heures)+"h ",1)]),t("div",ht,[t("div",yt,[a[0]||(a[0]=t("span",{class:"text-gray-500"},"‚åõ",-1)),t("span",$t,r(e.prestation.horaires),1)]),t("div",wt,[a[1]||(a[1]=t("span",{class:"text-gray-500"},"üìç",-1)),t("span",Ct,r(e.prestation.adresse),1)])]),a[3]||(a[3]=t("div",{class:"border-t border-gray-700 my-2 opacity-50 group-hover:opacity-75 transition"},null,-1)),t("div",kt,[t("span",null,"Cr√©√© le "+r(n(y)(e.prestation.created_at)),1),t("span",Dt,[a[2]||(a[2]=p(" üîÑ ")),e.prestation.updated_at?(o(),i("span",St,r(n(y)(e.prestation.updated_at)),1)):(o(),i("span",Pt,"Non modifi√©"))])])])]))}},jt={class:"bg-gray-800 p-6 rounded-2xl shadow-xl mb-8 border border-gray-700"},At={class:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4"},Nt={class:"flex-1"},Mt={class:"text-gray-400 mt-2 text-sm"},Tt={class:"font-semibold text-indigo-400"},Vt={key:0,class:"text-center p-8 rounded-xl border-2 border-dashed border-gray-600 hover:border-indigo-500 transition-colors"},Bt={key:1,class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},Et={class:"flex gap-4"},Lt={class:"space-y-2 flex-1"},Rt={class:"flex items-center justify-between"},zt={class:"font-mono text-sm text-indigo-400"},It={class:"text-xs bg-gray-700 text-gray-300 px-2 py-1 rounded-full"},qt={class:"grid grid-cols-2 gap-2 text-sm"},Ot={class:"flex items-center gap-2"},Gt={class:"text-gray-300"},Ht={class:"flex items-center gap-2"},Ut={class:"text-gray-300"},Jt={class:"flex items-center gap-2"},Kt={class:"text-gray-300 truncate"},Qt={class:"flex justify-between text-xs text-gray-400"},Wt={__name:"PrestationsNonFactured",setup(e){const d=k(),{dashboardData:a}=w(d),c=S(!1);return(g,s)=>(o(),i("div",jt,[t("div",At,[t("div",Nt,[s[3]||(s[3]=t("h2",{class:"text-2xl font-bold text-white flex items-center gap-3"},[t("span",{class:"bg-red-500/20 p-3 rounded-full text-red-400"},"üì•"),t("span",{class:"bg-gradient-to-r from-red-400 to-orange-400 bg-clip-text text-transparent"}," Prestations en attente ")],-1)),t("p",Mt,[s[2]||(s[2]=p(" Services r√©alis√©s non encore factur√©s ‚Ä¢ ")),t("span",Tt,r(n(a).prestations_non_factured.length)+" √©l√©ment(s) ",1)])]),n(a).prestations_non_factured.length>0?(o(),i("button",{key:0,onClick:s[0]||(s[0]=u=>c.value=!0),class:"bg-gradient-to-r from-indigo-500 to-purple-500 hover:from-indigo-600 hover:to-purple-600 text-white font-semibold px-6 py-3 rounded-xl flex items-center gap-2 transition-all shadow-lg hover:shadow-indigo-500/20 group"},s[4]||(s[4]=[t("span",{class:"text-lg transition-transform group-hover:scale-110"},"üìÑ",-1),p(" G√©n√©rer une facture ")]))):f("",!0)]),n(a).prestations_non_factured.length===0?(o(),i("div",Vt,s[5]||(s[5]=[t("div",{class:"text-6xl mb-4"},"üéâ",-1),t("h3",{class:"text-xl font-semibold text-gray-200 mb-2"},"Tout est √† jour !",-1),t("p",{class:"text-gray-400"},"Aucune prestation en attente de facturation",-1)]))):(o(),i("div",Bt,[(o(!0),i(P,null,F(n(a).prestations_non_factured,u=>(o(),i("div",{key:u.id,class:"group relative bg-gray-900 p-5 rounded-xl border border-gray-800 hover:border-indigo-500 transition-all"},[t("div",Et,[s[11]||(s[11]=t("div",{class:"bg-indigo-500/20 p-3 rounded-lg shrink-0"},[t("span",{class:"text-2xl"},"‚è≥")],-1)),t("div",Lt,[t("div",Rt,[t("span",zt,"#"+r(u.id),1),t("span",It,r(n(y)(u.date)),1)]),t("div",qt,[t("div",Ot,[s[6]||(s[6]=t("span",{class:"text-gray-500"},"üïí",-1)),t("span",Gt,r(u.heures)+"h",1)]),t("div",Ht,[s[7]||(s[7]=t("span",{class:"text-gray-500"},"‚è∞",-1)),t("span",Ut,r(u.horaires),1)]),t("div",Jt,[s[8]||(s[8]=t("span",{class:"text-gray-500"},"üìç",-1)),t("span",Kt,r(u.adresse),1)])]),s[10]||(s[10]=t("div",{class:"border-t border-gray-800 my-2 opacity-50 group-hover:opacity-75 transition"},null,-1)),t("div",Qt,[t("span",null,"Cr√©√© le "+r(n(y)(u.created_at)),1),s[9]||(s[9]=t("span",{class:"flex items-center gap-1"}," üìå Statut : Non factur√© ",-1))])])])]))),128))])),c.value?(o(),C(n(L),{key:2,onClose:s[1]||(s[1]=u=>c.value=!1),class:"animate-fade-in"})):f("",!0)]))}},Xt={class:"p-6 bg-gray-900 min-h-screen"},Yt={class:"mb-8"},Zt={key:0,class:"text-center text-gray-300"},te={key:1,class:"text-center text-red-400"},ee={key:2},re={__name:"Dashboard",setup(e){const d=k(),{dashboardData:a,period:c,loading:g,error:s}=w(d),{fetchDashboard:u}=d;function _(){u()}return A(()=>{u()}),(j,b)=>(o(),i("div",Xt,[b[2]||(b[2]=t("h1",{class:"text-3xl font-bold text-white mb-8"},"Tableau de bord",-1)),t("div",Yt,[b[1]||(b[1]=t("label",{for:"period",class:"text-white font-semibold mr-2"},"P√©riode :",-1)),N(t("input",{type:"month",id:"period","onUpdate:modelValue":b[0]||(b[0]=x=>T(c)?c.value=x:null),onChange:_,class:"p-2 rounded border border-gray-600 bg-gray-800 text-white"},null,544),[[M,n(c)]])]),n(g)?(o(),i("div",Zt,"Chargement...")):n(s)?(o(),i("div",te,r(n(s)),1)):n(a)?(o(),i("div",ee,[m(n(G)),m(n(U)),m(n(W)),m(n(Wt))])):f("",!0)]))}};export{re as default};
