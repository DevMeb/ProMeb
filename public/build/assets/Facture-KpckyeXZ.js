import{s as C,i as M,a as l,o,u as i,b as t,t as m,F as h,r as j,g as w,h as $,d as x,n as F,e as n,k as S,l as D,f as Y}from"./app-CzuueUTO.js";import{a as k,_ as N,b as P,c as B}from"./FactureMailModal-6nmfXeVr.js";import{d as _}from"./prestations-AgWsYLdo.js";/* empty css            */const V={class:"mt-6"},A={key:0,class:"flex justify-center my-6"},E={key:1,class:"flex justify-center my-6 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg"},H={class:"text-lg font-medium ml-2"},I={key:2,class:"flex justify-center my-6 bg-gray-800 px-6 py-4 rounded-lg shadow-lg"},L={key:3,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-8"},T={__name:"FacturesList",setup(s){const d=k(),{fetchInvoices:y}=d,{invoices:a,error:u,loading:f}=C(d);return M(()=>{y()}),(v,c)=>(o(),l("div",V,[i(f).fetch?(o(),l("div",A,c[0]||(c[0]=[t("div",{class:"animate-spin inline-block w-6 h-6 border-4 border-white border-t-transparent rounded-full"},null,-1),t("p",{class:"text-white text-lg font-medium ml-2"},"Chargement des factures...",-1)]))):i(u)?(o(),l("div",E,[c[1]||(c[1]=t("span",{class:"text-xl"},"❌",-1)),t("p",H,m(i(u)),1)])):i(a).length===0?(o(),l("div",I,c[2]||(c[2]=[t("p",{class:"text-gray-300 text-lg"},"📭 Aucune facture trouvée.",-1)]))):(o(),l("div",L,[(o(!0),l(h,null,j(i(a),b=>(o(),w(i(st),{invoice:b,key:b.id},null,8,["invoice"]))),128))]))]))}},z={class:"bg-gray-800 p-6 rounded-lg shadow-lg flex flex-col space-y-4"},O={class:"flex justify-between items-center border-b pb-3"},R={class:"text-xl font-semibold text-white flex items-center gap-2"},q={class:"bg-gray-900 p-4 rounded-md space-y-2"},G={class:"text-gray-300 text-sm"},J={class:"text-gray-300 text-sm"},K={class:"bg-gray-900 p-4 rounded-md grid grid-cols-2 gap-4"},Q={class:"text-gray-300 text-sm"},U={class:"text-gray-300 text-sm"},W={class:"text-gray-300 text-sm"},X={class:"text-gray-300 text-sm"},Z={class:"flex flex-wrap justify-center gap-3 mt-4"},tt=["disabled"],et={key:0,class:"animate-spin border-4 border-white border-t-transparent rounded-full w-4 h-4"},st={__name:"FactureListItem",props:{invoice:Object},setup(s){const d=k(),{invoicePaid:y}=d,{loading:a}=C(d),u=$(!1),f=$(!1),v=$(!1);function c(g){switch(g){case"en_attente_envoi":return"bg-yellow-500 text-white px-3 py-1 rounded-full text-xs";case"en_attente_paiement":return"bg-blue-500 text-white px-3 py-1 rounded-full text-xs";case"payé":return"bg-green-500 text-white px-3 py-1 rounded-full text-xs";default:return"bg-gray-500 text-white px-3 py-1 rounded-full text-xs"}}function b(g){switch(g){case"en_attente_envoi":return"En attente d'envoi";case"en_attente_paiement":return"En attente de paiement";case"payé":return"Payé";default:return g}}async function r(g){await y(g)}return(g,e)=>(o(),l(h,null,[t("div",z,[t("div",O,[t("h2",R," 🧾 Facture #"+m(s.invoice.id),1),t("span",{class:F(c(s.invoice.statut))},m(b(s.invoice.statut)),3)]),t("div",q,[t("p",G,[e[7]||(e[7]=n(" ⏱️ ")),e[8]||(e[8]=t("span",{class:"font-semibold text-white"},"Nombre d'heures :",-1)),n(" "+m(s.invoice.heures_total)+" h ",1)]),t("p",J,[e[9]||(e[9]=n(" 💶 ")),e[10]||(e[10]=t("span",{class:"font-semibold text-white"},"Montant :",-1)),n(" "+m(s.invoice.montant_total)+" € ",1)])]),t("div",K,[t("p",Q,[e[11]||(e[11]=n(" 🕒 ")),e[12]||(e[12]=t("span",{class:"font-semibold text-white"},"Créée le :",-1)),n(" "+m(s.invoice.created_at),1)]),t("p",U,[e[13]||(e[13]=n(" 🔄 ")),e[14]||(e[14]=t("span",{class:"font-semibold text-white"},"Mise à jour le :",-1)),n(" "+m(s.invoice.updated_at),1)]),t("p",W,[e[15]||(e[15]=n(" 💰 ")),e[16]||(e[16]=t("span",{class:"font-semibold text-white"},"Payée le :",-1)),n(" "+m(i(_)(s.invoice.paye_le).format("DD/MM/YYYY HH:mm:ss")||"Non payée"),1)]),t("p",X,[e[17]||(e[17]=n(" 📩 ")),e[18]||(e[18]=t("span",{class:"font-semibold text-white"},"Émise le :",-1)),n(" "+m(i(_)(s.invoice.envoye_le).format("DD/MM/YYYY HH:mm:ss")||"Non envoyé"),1)])]),t("div",Z,[t("button",{onClick:e[0]||(e[0]=p=>f.value=!0),class:"btn-action bg-gray-600"}," 📄 Voir "),s.invoice.statut==="en_attente_envoi"?(o(),l("button",{key:0,onClick:e[1]||(e[1]=p=>u.value=!0),class:"btn-action bg-red-500"}," 🗑️ Supprimer ")):x("",!0),s.invoice.statut==="en_attente_envoi"?(o(),l("button",{key:1,onClick:e[2]||(e[2]=p=>v.value=!0),class:"btn-action bg-yellow-500"}," 📩 Envoyer ")):x("",!0),s.invoice.statut==="en_attente_paiement"?(o(),l("button",{key:2,onClick:e[3]||(e[3]=p=>r(s.invoice)),disabled:i(a).paid,class:"btn-action bg-green-500 disabled:opacity-50"},[i(a).paid?(o(),l("span",et)):x("",!0),e[19]||(e[19]=n(" ✅ Payé "))],8,tt)):x("",!0)])]),f.value?(o(),w(i(N),{key:0,invoice:s.invoice,onClose:e[4]||(e[4]=p=>f.value=!1)},null,8,["invoice"])):x("",!0),u.value?(o(),w(i(lt),{key:1,invoice:s.invoice,onClose:e[5]||(e[5]=p=>u.value=!1)},null,8,["invoice"])):x("",!0),v.value?(o(),w(i(P),{key:2,invoice:s.invoice,onClose:e[6]||(e[6]=p=>v.value=!1)},null,8,["invoice"])):x("",!0)],64))}},nt={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-md flex items-center justify-center z-50"},ot={class:"bg-white p-6 rounded-lg shadow-lg w-[30rem] animate-fade-in transform transition-transform scale-95"},it={class:"text-gray-700 mt-3"},at={class:"text-gray-900"},lt={__name:"FactureDeleteModal",props:{invoice:Object},emits:["close"],setup(s,{emit:d}){const y=s,a=d,u=k(),{deleteInvoice:f}=u;S();function v(){a("close")}async function c(){await f(y.invoice.id),v()}return(b,r)=>s.invoice?(o(),l("div",nt,[t("div",{onClick:D(v,["self"]),class:"absolute inset-0"}),t("div",ot,[r[3]||(r[3]=t("div",{class:"flex items-center space-x-3"},[t("span",{class:"text-red-600 text-2xl"},"⚠️"),t("h2",{class:"text-lg font-semibold text-red-600"},"Confirmation de suppression")],-1)),t("p",it,[r[0]||(r[0]=n(" Êtes-vous sûr de vouloir supprimer la facture ")),t("strong",at,"#"+m(s.invoice.id),1),r[1]||(r[1]=n(" ? "))]),r[4]||(r[4]=t("p",{class:"text-sm text-gray-500 mt-2"},[n("Cette action est "),t("span",{class:"font-semibold text-red-500"},"irréversible"),n(".")],-1)),t("div",{class:"flex justify-end mt-6 space-x-3"},[t("button",{onClick:v,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-100 transition"}," Annuler "),t("button",{onClick:c,class:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition flex items-center"},r[2]||(r[2]=[t("span",{class:"mr-2"},"🗑️",-1),n(" Supprimer ")]))])])])):x("",!0)}},rt={class:"bg-gray-900"},dt={class:"mx-auto max-w-7xl"},ut={class:"bg-gray-900 py-10"},ct={class:"px-4 sm:px-6 lg:px-8"},mt={class:"sm:flex sm:items-center"},xt={class:"mt-4"},pt={__name:"Facture",setup(s){const d=$(!1);return(y,a)=>(o(),l("div",rt,[t("div",dt,[t("div",ut,[t("div",ct,[t("div",mt,[a[2]||(a[2]=t("div",{class:"sm:flex-auto"},[t("h1",{class:"text-base font-semibold leading-6 text-white"},"Factures"),t("p",{class:"mt-2 text-sm text-gray-300"}," Liste de toutes les factures. ")],-1)),t("div",xt,[t("button",{onClick:a[0]||(a[0]=u=>d.value=!0),class:"bg-indigo-500 text-white px-4 py-2 rounded-md"},"Ajouter une facture")])]),Y(i(T)),d.value?(o(),w(i(B),{key:0,onClose:a[1]||(a[1]=u=>d.value=!1)})):x("",!0)])])])]))}};export{pt as default};
